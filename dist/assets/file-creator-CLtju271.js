const E=async u=>{const{powersdk:e}=u;console.log("File Creator plugin loaded");let o=[],r=null;d();async function d(){if(o=x(),!e.container){console.error("Plugin container is undefined. Cannot initialize UI.");return}console.log("Container state before accessing innerHTML:",e.container);try{e.container.innerHTML=`
        <div class="file-creator-container max-w-5xl mx-auto p-5">
          <div class="header mb-5">
            <h1 class="text-2xl font-bold mb-2">File Creator</h1>
            <p class="text-gray-600">Create files with custom extensions</p>
          </div>
          
          <div class="controls mb-5">
            <button id="create-file" class="btn btn-primary">Create New File</button>
            <div id="extension-buttons" class="flex gap-2 mt-4"></div>
          </div>
        </div>
      `}catch(l){console.error("Error setting innerHTML:",l);return}if(console.log("Container state after setting innerHTML:",e.container),!e.container.innerHTML){console.error("Container innerHTML is undefined.");return}const n=e.container.querySelector("#extension-buttons");r=new e.visual.CardManager(n),p(),g()}function p(){const n=e.container.querySelector("#create-file");n?n.addEventListener("click",()=>{console.log("Create button clicked. Opening file dialog."),f()}):console.error("Create button not found in the container.")}function f(){const n=new e.visual.Dialog,l=[{type:"heading",text:"Enter File Details"},{type:"input",id:"file-name",inputType:"text",placeholder:"File Name",class:"input input-bordered mb-2",style:"width: 100%; margin-bottom: 10px;"},{type:"input",id:"file-extension",inputType:"text",placeholder:"File Extension",class:"input input-bordered",style:"width: 100%; margin-bottom: 10px;"}];n.open(l,async a=>{const s=a["file-name"],t=a["file-extension"];if(s&&t){console.log(`Creating file: ${s}.${t}`),o.includes(t)||(o.push(t),e.storage.set("extension-list",o));var i="";t=="json"?i="{}":i="I NEED TO HAVE SOMETHING OTHERWISE EAGLE FAILS",await e.utils.files.createFile(s,t,i)?console.log(`File ${s}.${t} created successfully.`):console.error(`Failed to create file ${s}.${t}.`)}},()=>{console.log("Dialog closed without submission.")})}function g(){r&&(r.clearCards(),o.forEach(n=>{r.addCardToContainer({id:`extension-${n}`,title:`Create .${n} File`,content:"",actions:[{id:`create-${n}`,text:`Create .${n} File`,onClick:()=>{const l=new e.visual.Dialog,a=[{type:"heading",text:"Enter File Details"},{type:"input",id:"file-name",inputType:"text",placeholder:"File Name",class:"input input-bordered mb-2",style:"width: 100%; margin-bottom: 10px;"},{type:"input",id:"file-extension",inputType:"text",placeholder:n,class:"input input-bordered",style:"width: 100%; margin-bottom: 10px;",disabled:!0}];l.open(a,async s=>{const t=s["file-name"],i=n;if(t){console.log(`Creating file: ${t}.${i}`),o.includes(i)||(o.push(i),e.storage.set("extension-list",o));var c="";i=="json"?c="{}":c="I NEED TO HAVE SOMETHING OTHERWISE EAGLE FAILS",await e.utils.files.createFile(t,i,c)?console.log(`File ${t}.${i} created successfully.`):console.error(`Failed to create file ${t}.${i}.`)}},()=>{console.log("Dialog closed without submission.")})},variant:"primary"}]})}))}function x(){return e.storage.get("extension-list")||[]}};export{E as plugin};
