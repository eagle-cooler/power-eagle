const w=async p=>{const{powersdk:f}=p,{container:o,CardManager:g,Dialog:d,utils:m}=f,{createFile:u}=m;console.log("File Creator plugin loaded");let i=[],r=null;x();async function x(){if(i=h(),!o){console.error("Plugin container is undefined. Cannot initialize UI.");return}console.log("Container state before accessing innerHTML:",o);try{o.innerHTML=`
        <div class="file-creator-container max-w-5xl mx-auto p-5">
          <div class="header mb-5">
            <h1 class="text-2xl font-bold mb-2">File Creator</h1>
            <p class="text-gray-600">Create files with custom extensions</p>
          </div>
          
          <div class="controls mb-5">
            <button id="create-file" class="btn btn-primary">Create New File</button>
            <div id="extension-buttons" class="flex gap-2 mt-4"></div>
          </div>
        </div>
      `}catch(l){console.error("Error setting innerHTML:",l);return}if(console.log("Container state after setting innerHTML:",o),!o.innerHTML){console.error("Container innerHTML is undefined.");return}const e=o.querySelector("#extension-buttons");r=new g(e),y(),b()}function y(){const e=o.querySelector("#create-file");e?e.addEventListener("click",()=>{console.log("Create button clicked. Opening file dialog."),E()}):console.error("Create button not found in the container.")}function E(){const e=new d,l=[{type:"heading",text:"Enter File Details"},{type:"input",id:"file-name",inputType:"text",placeholder:"File Name",class:"input input-bordered mb-2",style:"width: 100%; margin-bottom: 10px;"},{type:"input",id:"file-extension",inputType:"text",placeholder:"File Extension",class:"input input-bordered",style:"width: 100%; margin-bottom: 10px;"}];e.open(l,async a=>{const s=a["file-name"],t=a["file-extension"];if(s&&t){console.log(`Creating file: ${s}.${t}`),i.includes(t)||(i.push(t),localStorage.setItem("powereagle::file-creator::extension-list",JSON.stringify(i)));var n="";t=="json"?n="{}":n="I NEED TO HAVE SOMETHING OTHERWISE EAGLE FAILS",await u(s,t,n)?console.log(`File ${s}.${t} created successfully.`):console.error(`Failed to create file ${s}.${t}.`)}},()=>{console.log("Dialog closed without submission.")})}function b(){r&&(r.clearCards(),i.forEach(e=>{r.addCardToContainer({id:`extension-${e}`,title:`Create .${e} File`,content:"",actions:[{id:`create-${e}`,text:`Create .${e} File`,onClick:()=>{const l=new d,a=[{type:"heading",text:"Enter File Details"},{type:"input",id:"file-name",inputType:"text",placeholder:"File Name",class:"input input-bordered mb-2",style:"width: 100%; margin-bottom: 10px;"},{type:"input",id:"file-extension",inputType:"text",placeholder:e,class:"input input-bordered",style:"width: 100%; margin-bottom: 10px;",disabled:!0}];l.open(a,async s=>{const t=s["file-name"],n=e;if(t){console.log(`Creating file: ${t}.${n}`),i.includes(n)||(i.push(n),localStorage.setItem("powereagle::file-creator::extension-list",JSON.stringify(i)));var c="";n=="json"?c="{}":c="I NEED TO HAVE SOMETHING OTHERWISE EAGLE FAILS",await u(t,n,c)?console.log(`File ${t}.${n} created successfully.`):console.error(`Failed to create file ${t}.${n}.`)}},()=>{console.log("Dialog closed without submission.")})},variant:"primary"}]})}))}function h(){const e=localStorage.getItem("powereagle::file-creator::extension-list");return e?JSON.parse(e):[]}};export{w as plugin};
