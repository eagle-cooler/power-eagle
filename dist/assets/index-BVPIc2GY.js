const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BOiMMOdd.js","./index-BL7P1E-k.css"])))=>i.map(i=>d[i]);
var p=Object.defineProperty;var f=(n,e,t)=>e in n?p(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var u=(n,e,t)=>f(n,typeof e!="symbol"?e+"":e,t);import{_ as m,r as g}from"./index-BOiMMOdd.js";import{j as R,B as U,i as V,c as z,h as q,e as Z,f as G,b as K,a as W,d as J,g as Q,E as X}from"./index-BOiMMOdd.js";class b{constructor(e){u(this,"element");u(this,"config");this.config=e,this.element=this.createElement()}createElement(){const e=document.createElement("button");let r=`btn btn-${this.config.variant||"primary"}`;return this.config.size&&(r+=` btn-${this.config.size}`),this.config.className&&(r+=` ${this.config.className}`),e.className=r,e.textContent=this.config.text,this.config.disabled&&(e.disabled=!0),this.config.style&&(e.style.cssText=this.config.style),this.config.onClick&&e.addEventListener("click",i=>{i.preventDefault(),this.config.onClick()}),e}getElement(){return this.element}setText(e){this.config.text=e,this.element.textContent=e}setDisabled(e){this.config.disabled=e,this.element.disabled=e}setVariant(e){const t=this.config.variant||"primary";this.element.classList.remove(`btn-${t}`),this.config.variant=e||"primary",this.element.classList.add(`btn-${this.config.variant}`)}setOnClick(e){var r;const t=this.element.cloneNode(!0);(r=this.element.parentNode)==null||r.replaceChild(t,this.element),this.element=t,this.config.onClick=e,this.element.addEventListener("click",i=>{i.preventDefault(),e()})}remove(){this.element.parentNode&&this.element.parentNode.removeChild(this.element)}}class y{constructor(e){u(this,"cards",new Map);u(this,"container",null);this.container=e||this.createContainer()}createContainer(){const e=document.createElement("div");return e.className="card-container flex flex-wrap gap-4 p-4",e}createCard(e){return this.cards.set(e.id,e),this.renderCard(e)}renderCard(e){const t=document.createElement("div");t.className=`card bg-base-100 shadow-xl ${e.className||""}`,t.setAttribute("data-card-id",e.id);const r=document.createElement("div");r.className="card-body";const i=document.createElement("h2");if(i.className="card-title",i.textContent=e.title,e.subtitle){const s=document.createElement("p");s.className="text-sm text-gray-500 mb-2",s.textContent=e.subtitle,r.appendChild(s)}r.appendChild(i);const a=document.createElement("div");if(a.className="card-content",a.innerHTML=e.content,r.appendChild(a),e.actions&&e.actions.length>0){const s=document.createElement("div");s.className="card-actions justify-end mt-4",e.actions.forEach(o=>{const c=document.createElement("button");c.className=`btn btn-sm btn-${o.variant||"primary"}`,c.textContent=o.text,c.setAttribute("data-action-id",o.id),c.disabled=o.disabled||!1,c.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),o.disabled||o.onClick()}),s.appendChild(c)}),r.appendChild(s)}if(e.status&&e.status!=="default"){const s=document.createElement("div");s.className=`status-indicator status-${e.status}`;const o=this.getStatusIcon(e.status);s.innerHTML=o,t.appendChild(s)}return t.appendChild(r),t}getStatusIcon(e){switch(e){case"success":return'<span class="status-icon success">✓</span>';case"warning":return'<span class="status-icon warning">⚠</span>';case"error":return'<span class="status-icon error">✗</span>';default:return""}}addCardToContainer(e){if(!this.container)return;const t=this.createCard(e);this.container.appendChild(t)}removeCard(e){var r;const t=(r=this.container)==null?void 0:r.querySelector(`[data-card-id="${e}"]`);t&&(t.remove(),this.cards.delete(e))}updateCard(e,t){var s;const r=this.cards.get(e);if(!r)return;const i={...r,...t};this.cards.set(e,i);const a=(s=this.container)==null?void 0:s.querySelector(`[data-card-id="${e}"]`);if(a){const o=this.createCard(i);a.replaceWith(o)}}setContainer(e){this.container=e}getCards(){return Array.from(this.cards.values())}clearCards(){this.container&&(this.container.innerHTML=""),this.cards.clear()}}class C{constructor(){u(this,"backdrop");u(this,"contentBox");u(this,"onCloseCallback",null);u(this,"onSubmitCallback",null);this.backdrop=document.createElement("div"),this.backdrop.style.position="fixed",this.backdrop.style.top="0",this.backdrop.style.left="0",this.backdrop.style.width="100%",this.backdrop.style.height="100%",this.backdrop.style.backgroundColor="rgba(0, 0, 0, 0.8)",this.backdrop.style.display="none",this.backdrop.style.zIndex="1000",this.backdrop.addEventListener("click",()=>this.close()),this.contentBox=document.createElement("div"),this.contentBox.style.position="absolute",this.contentBox.style.top="50%",this.contentBox.style.left="50%",this.contentBox.style.transform="translate(-50%, -50%)",this.contentBox.style.backgroundColor="#1e1e1e",this.contentBox.style.color="#ffffff",this.contentBox.style.padding="20px",this.contentBox.style.borderRadius="8px",this.contentBox.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.3)",this.contentBox.addEventListener("click",e=>e.stopPropagation()),this.backdrop.appendChild(this.contentBox),document.body.appendChild(this.backdrop)}open(e,t,r){this.contentBox.innerHTML="",e.forEach(o=>{let c;switch(o.type){case"heading":c=document.createElement("h2"),c.textContent=o.text||"";break;case"input":const l=document.createElement("input");l.id=o.id||"",l.type=o.inputType||"text",l.placeholder=o.placeholder||"",l.className=o.class||"",l.style.cssText=o.style||"",o.disabled&&(l.disabled=!0),c=l;break;default:console.warn(`Unsupported element type: ${o.type}`);return}this.contentBox.appendChild(c)});const i=document.createElement("div");i.style.textAlign="right";const a=document.createElement("button");a.id="dialog-submit",a.textContent="Submit",a.className="btn btn-primary",a.style.marginRight="10px",a.addEventListener("click",()=>{const o=this.collectData();this.onSubmitCallback&&this.onSubmitCallback(o),this.close()});const s=document.createElement("button");s.id="dialog-cancel",s.textContent="Cancel",s.className="btn btn-secondary",s.addEventListener("click",()=>this.close()),i.appendChild(a),i.appendChild(s),this.contentBox.appendChild(i),this.onSubmitCallback=t,this.onCloseCallback=r||null,this.backdrop.style.display="block"}close(){this.backdrop.style.display="none",this.onCloseCallback&&this.onCloseCallback()}collectData(){const e=this.contentBox.querySelectorAll("input"),t={};return e.forEach(r=>{r.id&&(t[r.id]=r.value)}),t}}function E(n,e,t){const r=document.createElement(n);return e&&(r.className=e),t&&(r.textContent=t),r}function v(n,e){const t=document.createElement("style");e&&(t.id=e),t.textContent=n,document.head.appendChild(t)}function x(n){const e=document.getElementById(n);e&&e.remove()}function w(n,e=5e3){return new Promise((t,r)=>{const i=document.querySelector(n);if(i){t(i);return}const a=new MutationObserver(()=>{const s=document.querySelector(n);s&&(a.disconnect(),t(s))});a.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{a.disconnect(),r(new Error(`Element ${n} not found within ${e}ms`))},e)})}function _(n){const e=document.createElement("script");e.textContent=n,document.head.appendChild(e),e.remove()}function T(n){if(navigator.clipboard)return navigator.clipboard.writeText(n);{const e=document.createElement("textarea");return e.value=n,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),Promise.resolve()}}function k(n){const e=document.createElement("div");return e.textContent=n,e.innerHTML}const B=Object.freeze(Object.defineProperty({__proto__:null,addStylesheet:v,copyToClipboard:T,createElement:E,injectScript:_,removeStylesheet:x,sanitizeHtml:k,waitForElement:w},Symbol.toStringTag,{value:"Module"}));function $(n,e){let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>n(...r),e)}}function P(n,e){let t;return(...r)=>{t||(n(...r),t=!0,setTimeout(()=>t=!1,e))}}function S(n="plugin"){return`${n}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function L(n){try{return new URL(n),!0}catch{return!1}}const D=Object.freeze(Object.defineProperty({__proto__:null,debounce:$,generateId:S,isValidUrl:L,throttle:P},Symbol.toStringTag,{value:"Module"}));async function h(n,e){try{return(await e.folder.getAll()).find(i=>i.name===n)||null}catch(t){return console.error("Error searching for folder:",t),null}}async function F(n,e,t){const r=n.name||n.title||n.id||"Unknown Folder",i=[];let a=0;console.log(`Swapping folder "${r}" to tag for ${e.length} items`);for(const s of e)try{const o=await t.item.getById(s.id),c=o.tags||[];c.includes(r)||(o.tags=[...c,r],console.log(`Adding tag "${r}" to item ${s.id}`));const l=o.folders||[];l.includes(n.id)&&(o.folders=l.filter(d=>d!==n.id),console.log(`Removing item ${s.id} from folder "${r}"`)),await o.save(),a++}catch(o){const c=`Error processing item ${s.id}: ${o}`;console.error(c),i.push(c)}return{success:i.length===0,processedCount:a,errors:i}}async function M(n,e,t){const r=[];let i=0;console.log(`Swapping tag "${n}" to folder for ${e.length} items`);let a=await h(n,t);if(!a)try{console.log(`Creating new folder: "${n}"`),a=await t.folder.create({name:n}),console.log("Created new folder:",a)}catch(s){const o=`Failed to create folder "${n}": ${s}`;return console.error(o),{success:!1,processedCount:0,errors:[o],folder:null}}for(const s of e)try{const o=await t.item.getById(s.id),c=o.tags||[];c.includes(n)&&(o.tags=c.filter(d=>d!==n),console.log(`Removing tag "${n}" from item ${s.id}`));const l=o.folders||[];l.includes(a.id)||(o.folders=[...l,a.id],console.log(`Adding item ${s.id} to folder "${n}"`)),await o.save(),i++}catch(o){const c=`Error processing item ${s.id}: ${o}`;console.error(c),r.push(c)}return{success:r.length===0,processedCount:i,errors:r,folder:a}}const N=Object.freeze(Object.defineProperty({__proto__:null,getFolderByName:h,swapFolderToTag:F,swapTagToFolder:M},Symbol.toStringTag,{value:"Module"}));async function O(n,e,t,r){const i=await m(()=>import("./index-BOiMMOdd.js").then(d=>d.w),__vite__mapDeps([0,1]),import.meta.url),a=await m(()=>import("./index-BOiMMOdd.js").then(d=>d.k),__vite__mapDeps([0,1]),import.meta.url),s=await m(()=>import("./index-BOiMMOdd.js").then(d=>d.p),__vite__mapDeps([0,1]),import.meta.url),o=await m(()=>Promise.resolve().then(()=>B),void 0,import.meta.url),c=await m(()=>Promise.resolve().then(()=>D),void 0,import.meta.url),l=await m(()=>Promise.resolve().then(()=>N),void 0,import.meta.url);return{storage:n,container:e,pluginId:t,manifest:r,visual:{Button:b,CardManager:y,Dialog:C},utils:{files:{createFile:a.createFile,extractZip:a.extractZip,listZipContents:a.listZipContents,formatBytes:a.formatBytes},paths:{getUserHomeDirectory:s.getUserHomeDirectory,getExtensionsPath:s.getExtensionsPath,getDownloadPath:s.getDownloadPath,getPowerEagleBasePath:s.getPowerEagleBasePath,ensurePowerEagleDirectories:s.ensurePowerEagleDirectories},dom:{createElement:o.createElement,addStylesheet:o.addStylesheet,removeStylesheet:o.removeStylesheet,waitForElement:o.waitForElement,injectScript:o.injectScript,copyToClipboard:o.copyToClipboard,sanitizeHtml:o.sanitizeHtml},common:{debounce:c.debounce,throttle:c.throttle,generateId:c.generateId,isValidUrl:c.isValidUrl},op:{getFolderByName:l.getFolderByName,swapFolderToTag:l.swapFolderToTag,swapTagToFolder:l.swapTagToFolder}},webapi:i.default,listeners:g}}export{R as BUILT_IN_PLUGINS,U as BaseManager,b as Button,y as CardManager,C as Dialog,v as addStylesheet,T as copyToClipboard,V as createDebugLogger,E as createElement,z as createFile,O as createPowerSDKContext,$ as debounce,q as ensurePowerEagleDirectories,Z as extractZip,G as formatBytes,S as generateId,K as getDownloadPath,W as getExtensionsPath,h as getFolderByName,J as getPowerEagleBasePath,Q as getUserHomeDirectory,_ as injectScript,L as isValidUrl,x as removeStylesheet,g as rootListeners,k as sanitizeHtml,F as swapFolderToTag,M as swapTagToFolder,P as throttle,w as waitForElement,X as webapi};
