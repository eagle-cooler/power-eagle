var f=Object.defineProperty;var T=(s,t,r)=>t in s?f(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var a=(s,t,r)=>T(s,typeof t!="symbol"?t+"":t,r);const e=class e{static async _internalGetToken(){if(e.token)return e.token;try{const t=await fetch("http://localhost:41595/api/application/info");if(!t)throw new Error("No response from Eagle");const i=(await t.json()).data.preferences.developer.apiToken;if(i)return e.token=i,i}catch(t){console.error(t)}return null}static async _internalRequest(t,r,i=null,o=null){const l=await e._internalGetToken();if(!l)throw new Error("No token found");let u=`http://localhost:41595/api/${t}?token=${l}`;o&&(o=Object.fromEntries(Object.entries(o).filter(([,n])=>n!==null)),u+="&"+Object.entries(o).map(([n,c])=>`${n}=${c}`).join("&")),r==="POST"&&i&&(i=Object.fromEntries(Object.entries(i).filter(([,n])=>n!==null)));try{return(await(await fetch(u,r==="POST"?{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}:void 0)).json()).data}catch(n){throw console.error("Request failed:",n),n}}};a(e,"token",null),a(e,"application",class{static info(){return e._internalRequest("application/info","GET")}}),a(e,"folder",class{static create(t,r=null){return e._internalRequest("folder/create","POST",{folderName:t,parent:r})}static rename(t,r){return e._internalRequest("folder/rename","POST",{folderId:t,newName:r})}static update(t){return e._internalRequest("folder/update","POST",t)}static list(){return e._internalRequest("folder/list","GET")}static listRecent(){return e._internalRequest("folder/listRecent","GET")}}),a(e,"library",class{static info(){return e._internalRequest("library/info","GET")}static history(){return e._internalRequest("library/history","GET")}static switch(t){return e._internalRequest("library/switch","POST",{libraryPath:t})}static icon(t){return e._internalRequest("library/icon","GET",null,{libraryPath:t})}}),a(e,"item",class{static update(t){return e._internalRequest("item/update","POST",{id:t.itemId,tags:t.tags,annotation:t.annotation,url:t.url,star:t.star})}static refreshThumbnail(t){return e._internalRequest("item/refreshThumbnail","POST",{id:t})}static refreshPalette(t){return e._internalRequest("item/refreshPalette","POST",{id:t})}static moveToTrash(t){return e._internalRequest("item/moveToTrash","POST",{itemIds:t})}static list(t={}){return e._internalRequest("item/list","GET",null,t)}static getThumbnail(t){return e._internalRequest("item/thumbnail","GET",null,{id:t})}static getInfo(t){return e._internalRequest("item/info","GET",null,{id:t})}static addBookmark(t){return e._internalRequest("item/addBookmark","POST",t)}static addFromUrl(t){return e._internalRequest("item/addFromUrl","POST",t)}static addFromPath(t){return e._internalRequest("item/addFromPath","POST",t)}static addFromURLs(t){return e._internalRequest("item/addFromURLs","POST",t)}});let d=e;export{d as default};
