const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-D1ZN4Y97.js","./index-CTom_P7a.css"])))=>i.map(i=>d[i]);
var m=Object.defineProperty;var p=(n,e,t)=>e in n?m(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var d=(n,e,t)=>p(n,typeof e!="symbol"?e+"":e,t);import{_ as u,r as h}from"./index-D1ZN4Y97.js";import{f as q,B as U,d as H,e as V,b as R,a as Z,c as G,g as K,E as W}from"./index-D1ZN4Y97.js";class f{constructor(e){d(this,"element");d(this,"config");this.config=e,this.element=this.createElement()}createElement(){const e=document.createElement("button");let s=`btn btn-${this.config.variant||"primary"}`;return this.config.size&&(s+=` btn-${this.config.size}`),this.config.className&&(s+=` ${this.config.className}`),e.className=s,e.textContent=this.config.text,this.config.disabled&&(e.disabled=!0),this.config.style&&(e.style.cssText=this.config.style),this.config.onClick&&e.addEventListener("click",i=>{i.preventDefault(),this.config.onClick()}),e}getElement(){return this.element}setText(e){this.config.text=e,this.element.textContent=e}setDisabled(e){this.config.disabled=e,this.element.disabled=e}setVariant(e){const t=this.config.variant||"primary";this.element.classList.remove(`btn-${t}`),this.config.variant=e||"primary",this.element.classList.add(`btn-${this.config.variant}`)}setOnClick(e){var s;const t=this.element.cloneNode(!0);(s=this.element.parentNode)==null||s.replaceChild(t,this.element),this.element=t,this.config.onClick=e,this.element.addEventListener("click",i=>{i.preventDefault(),e()})}remove(){this.element.parentNode&&this.element.parentNode.removeChild(this.element)}}class b{constructor(e){d(this,"cards",new Map);d(this,"container",null);this.container=e||this.createContainer()}createContainer(){const e=document.createElement("div");return e.className="card-container flex flex-wrap gap-4 p-4",e}createCard(e){return this.cards.set(e.id,e),this.renderCard(e)}renderCard(e){const t=document.createElement("div");t.className=`card bg-base-100 shadow-xl ${e.className||""}`,t.setAttribute("data-card-id",e.id);const s=document.createElement("div");s.className="card-body";const i=document.createElement("h2");if(i.className="card-title",i.textContent=e.title,e.subtitle){const o=document.createElement("p");o.className="text-sm text-gray-500 mb-2",o.textContent=e.subtitle,s.appendChild(o)}s.appendChild(i);const a=document.createElement("div");if(a.className="card-content",a.innerHTML=e.content,s.appendChild(a),e.actions&&e.actions.length>0){const o=document.createElement("div");o.className="card-actions justify-end mt-4",e.actions.forEach(r=>{const c=document.createElement("button");c.className=`btn btn-sm btn-${r.variant||"primary"}`,c.textContent=r.text,c.setAttribute("data-action-id",r.id),c.disabled=r.disabled||!1,c.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),r.disabled||r.onClick()}),o.appendChild(c)}),s.appendChild(o)}if(e.status&&e.status!=="default"){const o=document.createElement("div");o.className=`status-indicator status-${e.status}`;const r=this.getStatusIcon(e.status);o.innerHTML=r,t.appendChild(o)}return t.appendChild(s),t}getStatusIcon(e){switch(e){case"success":return'<span class="status-icon success">✓</span>';case"warning":return'<span class="status-icon warning">⚠</span>';case"error":return'<span class="status-icon error">✗</span>';default:return""}}addCardToContainer(e){if(!this.container)return;const t=this.createCard(e);this.container.appendChild(t)}removeCard(e){var s;const t=(s=this.container)==null?void 0:s.querySelector(`[data-card-id="${e}"]`);t&&(t.remove(),this.cards.delete(e))}updateCard(e,t){var o;const s=this.cards.get(e);if(!s)return;const i={...s,...t};this.cards.set(e,i);const a=(o=this.container)==null?void 0:o.querySelector(`[data-card-id="${e}"]`);if(a){const r=this.createCard(i);a.replaceWith(r)}}setContainer(e){this.container=e}getCards(){return Array.from(this.cards.values())}clearCards(){this.container&&(this.container.innerHTML=""),this.cards.clear()}}class y{constructor(){d(this,"backdrop");d(this,"contentBox");d(this,"onCloseCallback",null);d(this,"onSubmitCallback",null);this.backdrop=document.createElement("div"),this.backdrop.style.position="fixed",this.backdrop.style.top="0",this.backdrop.style.left="0",this.backdrop.style.width="100%",this.backdrop.style.height="100%",this.backdrop.style.backgroundColor="rgba(0, 0, 0, 0.8)",this.backdrop.style.display="none",this.backdrop.style.zIndex="1000",this.backdrop.addEventListener("click",()=>this.close()),this.contentBox=document.createElement("div"),this.contentBox.style.position="absolute",this.contentBox.style.top="50%",this.contentBox.style.left="50%",this.contentBox.style.transform="translate(-50%, -50%)",this.contentBox.style.backgroundColor="#1e1e1e",this.contentBox.style.color="#ffffff",this.contentBox.style.padding="20px",this.contentBox.style.borderRadius="8px",this.contentBox.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.3)",this.contentBox.addEventListener("click",e=>e.stopPropagation()),this.backdrop.appendChild(this.contentBox),document.body.appendChild(this.backdrop)}open(e,t,s){this.contentBox.innerHTML="",e.forEach(r=>{let c;switch(r.type){case"heading":c=document.createElement("h2"),c.textContent=r.text||"";break;case"input":const l=document.createElement("input");l.id=r.id||"",l.type=r.inputType||"text",l.placeholder=r.placeholder||"",l.className=r.class||"",l.style.cssText=r.style||"",r.disabled&&(l.disabled=!0),c=l;break;default:console.warn(`Unsupported element type: ${r.type}`);return}this.contentBox.appendChild(c)});const i=document.createElement("div");i.style.textAlign="right";const a=document.createElement("button");a.id="dialog-submit",a.textContent="Submit",a.className="btn btn-primary",a.style.marginRight="10px",a.addEventListener("click",()=>{const r=this.collectData();this.onSubmitCallback&&this.onSubmitCallback(r),this.close()});const o=document.createElement("button");o.id="dialog-cancel",o.textContent="Cancel",o.className="btn btn-secondary",o.addEventListener("click",()=>this.close()),i.appendChild(a),i.appendChild(o),this.contentBox.appendChild(i),this.onSubmitCallback=t,this.onCloseCallback=s||null,this.backdrop.style.display="block"}close(){this.backdrop.style.display="none",this.onCloseCallback&&this.onCloseCallback()}collectData(){const e=this.contentBox.querySelectorAll("input"),t={};return e.forEach(s=>{s.id&&(t[s.id]=s.value)}),t}}async function g(n,e){try{const{exec:t}=require("child_process"),{promisify:s}=require("util"),i=s(t),a=require("fs");a.existsSync(e)||a.mkdirSync(e,{recursive:!0});const o=process.platform;let r;if(o==="win32"){const c=n.replace(/\\/g,"\\\\"),l=e.replace(/\\/g,"\\\\");r=`powershell -Command "Expand-Archive -Path '${c}' -DestinationPath '${l}' -Force"`}else if(o==="darwin")r=`unzip -o "${n}" -d "${e}"`;else throw new Error(`Unsupported platform: ${o}`);return console.log(`Extracting zip: ${r}`),await i(r),!0}catch(t){return console.error("Zip extraction failed:",t),!1}}async function C(n){try{const{exec:e}=require("child_process"),{promisify:t}=require("util"),s=t(e),i=process.platform;let a;if(i==="win32")a=`powershell -Command "Add-Type -AssemblyName System.IO.Compression.FileSystem; [System.IO.Compression.ZipFile]::OpenRead('${n.replace(/\\/g,"\\\\")}').Entries | Select-Object -ExpandProperty FullName"`;else if(i==="darwin")a=`unzip -l "${n}" | grep -E '^[[:space:]]*[0-9]+' | awk '{print $NF}'`;else throw new Error(`Unsupported platform: ${i}`);const{stdout:o}=await s(a);return i==="win32"?o.trim().split(`
`).filter(r=>r.trim()):o.trim().split(`
`).filter(r=>r.trim())}catch(e){return console.error("Failed to list zip contents:",e),[]}}async function E(n,e,t=null,s={}){const i=require("fs"),a=require("path");try{const o=await window.eagle.os.tmpdir(),r=a.join(o,`${n}.${e}`),c=await window.eagle.folder.getSelected();if(c&&c.length>0){const l=c[0];s.folders=[l.id]}return await i.promises.writeFile(r,t||""),s.name=`${n}.${e}`,await window.eagle.item.addFromPath(r,s),!0}catch(o){return console.error("Failed to create file in Eagle:",o),!1}}function x(n,e=2){if(n===0)return"0 Bytes";const t=1024,s=e<0?0:e,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(n)/Math.log(t));return parseFloat((n/Math.pow(t,a)).toFixed(s))+" "+i[a]}const w=Object.freeze(Object.defineProperty({__proto__:null,createFile:E,extractZip:g,formatBytes:x,listZipContents:C},Symbol.toStringTag,{value:"Module"}));function v(n,e,t){const s=document.createElement(n);return e&&(s.className=e),t&&(s.textContent=t),s}function _(n,e){const t=document.createElement("style");e&&(t.id=e),t.textContent=n,document.head.appendChild(t)}function k(n){const e=document.getElementById(n);e&&e.remove()}function B(n,e=5e3){return new Promise((t,s)=>{const i=document.querySelector(n);if(i){t(i);return}const a=new MutationObserver(()=>{const o=document.querySelector(n);o&&(a.disconnect(),t(o))});a.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{a.disconnect(),s(new Error(`Element ${n} not found within ${e}ms`))},e)})}function P(n){const e=document.createElement("script");e.textContent=n,document.head.appendChild(e),e.remove()}function S(n){if(navigator.clipboard)return navigator.clipboard.writeText(n);{const e=document.createElement("textarea");return e.value=n,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),Promise.resolve()}}function T(n){const e=document.createElement("div");return e.textContent=n,e.innerHTML}const $=Object.freeze(Object.defineProperty({__proto__:null,addStylesheet:_,copyToClipboard:S,createElement:v,injectScript:P,removeStylesheet:k,sanitizeHtml:T,waitForElement:B},Symbol.toStringTag,{value:"Module"}));function D(n,e){let t;return(...s)=>{clearTimeout(t),t=setTimeout(()=>n(...s),e)}}function L(n,e){let t;return(...s)=>{t||(n(...s),t=!0,setTimeout(()=>t=!1,e))}}function N(n="plugin"){return`${n}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function M(n){try{return new URL(n),!0}catch{return!1}}const A=Object.freeze(Object.defineProperty({__proto__:null,debounce:D,generateId:N,isValidUrl:M,throttle:L},Symbol.toStringTag,{value:"Module"}));async function I(n,e,t,s){const i=await u(()=>import("./index-D1ZN4Y97.js").then(l=>l.w),__vite__mapDeps([0,1]),import.meta.url),a=await u(()=>Promise.resolve().then(()=>w),void 0,import.meta.url),o=await u(()=>import("./index-D1ZN4Y97.js").then(l=>l.p),__vite__mapDeps([0,1]),import.meta.url),r=await u(()=>Promise.resolve().then(()=>$),void 0,import.meta.url),c=await u(()=>Promise.resolve().then(()=>A),void 0,import.meta.url);return{storage:n,container:e,pluginId:t,manifest:s,visual:{Button:f,CardManager:b,Dialog:y},utils:{files:{createFile:a.createFile,extractZip:a.extractZip,listZipContents:a.listZipContents,formatBytes:a.formatBytes},paths:{getUserHomeDirectory:o.getUserHomeDirectory,getExtensionsPath:o.getExtensionsPath,getDownloadPath:o.getDownloadPath,getPowerEagleBasePath:o.getPowerEagleBasePath,ensurePowerEagleDirectories:o.ensurePowerEagleDirectories},dom:{createElement:r.createElement,addStylesheet:r.addStylesheet,removeStylesheet:r.removeStylesheet,waitForElement:r.waitForElement,injectScript:r.injectScript,copyToClipboard:r.copyToClipboard,sanitizeHtml:r.sanitizeHtml},common:{debounce:c.debounce,throttle:c.throttle,generateId:c.generateId,isValidUrl:c.isValidUrl}},webapi:i.default,listeners:h}}export{q as BUILT_IN_PLUGINS,U as BaseManager,f as Button,b as CardManager,y as Dialog,_ as addStylesheet,S as copyToClipboard,H as createDebugLogger,v as createElement,E as createFile,I as createPowerSDKContext,D as debounce,V as ensurePowerEagleDirectories,g as extractZip,x as formatBytes,N as generateId,R as getDownloadPath,Z as getExtensionsPath,G as getPowerEagleBasePath,K as getUserHomeDirectory,P as injectScript,M as isValidUrl,C as listZipContents,k as removeStylesheet,h as rootListeners,T as sanitizeHtml,L as throttle,B as waitForElement,W as webapi};
