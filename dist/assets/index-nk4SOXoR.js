const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-XOtGWQql.js","./index-BmUP8bJB.css"])))=>i.map(i=>d[i]);
var h=Object.defineProperty;var f=(n,e,t)=>e in n?h(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var d=(n,e,t)=>f(n,typeof e!="symbol"?e+"":e,t);import{_ as m,r as g}from"./index-XOtGWQql.js";import{f as Z,B as G,d as K,e as W,b as Y,a as J,c as Q,g as X,E as ee}from"./index-XOtGWQql.js";class y{constructor(e){d(this,"element");d(this,"config");this.config=e,this.element=this.createElement()}createElement(){const e=document.createElement("button");let r=`btn btn-${this.config.variant||"primary"}`;return this.config.size&&(r+=` btn-${this.config.size}`),this.config.className&&(r+=` ${this.config.className}`),e.className=r,e.textContent=this.config.text,this.config.disabled&&(e.disabled=!0),this.config.style&&(e.style.cssText=this.config.style),this.config.onClick&&e.addEventListener("click",a=>{a.preventDefault(),this.config.onClick()}),e}getElement(){return this.element}setText(e){this.config.text=e,this.element.textContent=e}setDisabled(e){this.config.disabled=e,this.element.disabled=e}setVariant(e){const t=this.config.variant||"primary";this.element.classList.remove(`btn-${t}`),this.config.variant=e||"primary",this.element.classList.add(`btn-${this.config.variant}`)}setOnClick(e){var r;const t=this.element.cloneNode(!0);(r=this.element.parentNode)==null||r.replaceChild(t,this.element),this.element=t,this.config.onClick=e,this.element.addEventListener("click",a=>{a.preventDefault(),e()})}remove(){this.element.parentNode&&this.element.parentNode.removeChild(this.element)}}class b{constructor(e){d(this,"cards",new Map);d(this,"container",null);this.container=e||this.createContainer()}createContainer(){const e=document.createElement("div");return e.className="card-container flex flex-wrap gap-4 p-4",e}createCard(e){return this.cards.set(e.id,e),this.renderCard(e)}renderCard(e){const t=document.createElement("div");t.className=`card bg-base-100 shadow-xl ${e.className||""}`,t.setAttribute("data-card-id",e.id);const r=document.createElement("div");r.className="card-body";const a=document.createElement("h2");if(a.className="card-title",a.textContent=e.title,e.subtitle){const s=document.createElement("p");s.className="text-sm text-gray-500 mb-2",s.textContent=e.subtitle,r.appendChild(s)}r.appendChild(a);const i=document.createElement("div");if(i.className="card-content",i.innerHTML=e.content,r.appendChild(i),e.actions&&e.actions.length>0){const s=document.createElement("div");s.className="card-actions justify-end mt-4",e.actions.forEach(o=>{const c=document.createElement("button");c.className=`btn btn-sm btn-${o.variant||"primary"}`,c.textContent=o.text,c.setAttribute("data-action-id",o.id),c.disabled=o.disabled||!1,c.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),o.disabled||o.onClick()}),s.appendChild(c)}),r.appendChild(s)}if(e.status&&e.status!=="default"){const s=document.createElement("div");s.className=`status-indicator status-${e.status}`;const o=this.getStatusIcon(e.status);s.innerHTML=o,t.appendChild(s)}return t.appendChild(r),t}getStatusIcon(e){switch(e){case"success":return'<span class="status-icon success">✓</span>';case"warning":return'<span class="status-icon warning">⚠</span>';case"error":return'<span class="status-icon error">✗</span>';default:return""}}addCardToContainer(e){if(!this.container)return;const t=this.createCard(e);this.container.appendChild(t)}removeCard(e){var r;const t=(r=this.container)==null?void 0:r.querySelector(`[data-card-id="${e}"]`);t&&(t.remove(),this.cards.delete(e))}updateCard(e,t){var s;const r=this.cards.get(e);if(!r)return;const a={...r,...t};this.cards.set(e,a);const i=(s=this.container)==null?void 0:s.querySelector(`[data-card-id="${e}"]`);if(i){const o=this.createCard(a);i.replaceWith(o)}}setContainer(e){this.container=e}getCards(){return Array.from(this.cards.values())}clearCards(){this.container&&(this.container.innerHTML=""),this.cards.clear()}}class C{constructor(){d(this,"backdrop");d(this,"contentBox");d(this,"onCloseCallback",null);d(this,"onSubmitCallback",null);this.backdrop=document.createElement("div"),this.backdrop.style.position="fixed",this.backdrop.style.top="0",this.backdrop.style.left="0",this.backdrop.style.width="100%",this.backdrop.style.height="100%",this.backdrop.style.backgroundColor="rgba(0, 0, 0, 0.8)",this.backdrop.style.display="none",this.backdrop.style.zIndex="1000",this.backdrop.addEventListener("click",()=>this.close()),this.contentBox=document.createElement("div"),this.contentBox.style.position="absolute",this.contentBox.style.top="50%",this.contentBox.style.left="50%",this.contentBox.style.transform="translate(-50%, -50%)",this.contentBox.style.backgroundColor="#1e1e1e",this.contentBox.style.color="#ffffff",this.contentBox.style.padding="20px",this.contentBox.style.borderRadius="8px",this.contentBox.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.3)",this.contentBox.addEventListener("click",e=>e.stopPropagation()),this.backdrop.appendChild(this.contentBox),document.body.appendChild(this.backdrop)}open(e,t,r){this.contentBox.innerHTML="",e.forEach(o=>{let c;switch(o.type){case"heading":c=document.createElement("h2"),c.textContent=o.text||"";break;case"input":const l=document.createElement("input");l.id=o.id||"",l.type=o.inputType||"text",l.placeholder=o.placeholder||"",l.className=o.class||"",l.style.cssText=o.style||"",o.disabled&&(l.disabled=!0),c=l;break;default:console.warn(`Unsupported element type: ${o.type}`);return}this.contentBox.appendChild(c)});const a=document.createElement("div");a.style.textAlign="right";const i=document.createElement("button");i.id="dialog-submit",i.textContent="Submit",i.className="btn btn-primary",i.style.marginRight="10px",i.addEventListener("click",()=>{const o=this.collectData();this.onSubmitCallback&&this.onSubmitCallback(o),this.close()});const s=document.createElement("button");s.id="dialog-cancel",s.textContent="Cancel",s.className="btn btn-secondary",s.addEventListener("click",()=>this.close()),a.appendChild(i),a.appendChild(s),this.contentBox.appendChild(a),this.onSubmitCallback=t,this.onCloseCallback=r||null,this.backdrop.style.display="block"}close(){this.backdrop.style.display="none",this.onCloseCallback&&this.onCloseCallback()}collectData(){const e=this.contentBox.querySelectorAll("input"),t={};return e.forEach(r=>{r.id&&(t[r.id]=r.value)}),t}}async function E(n,e){try{const{exec:t}=require("child_process"),{promisify:r}=require("util"),a=r(t),i=require("fs");i.existsSync(e)||i.mkdirSync(e,{recursive:!0});const s=process.platform;let o;if(s==="win32"){const c=n.replace(/\\/g,"\\\\"),l=e.replace(/\\/g,"\\\\");o=`powershell -Command "Expand-Archive -Path '${c}' -DestinationPath '${l}' -Force"`}else if(s==="darwin")o=`unzip -o "${n}" -d "${e}"`;else throw new Error(`Unsupported platform: ${s}`);return console.log(`Extracting zip: ${o}`),await a(o),!0}catch(t){return console.error("Zip extraction failed:",t),!1}}async function w(n){try{const{exec:e}=require("child_process"),{promisify:t}=require("util"),r=t(e),a=process.platform;let i;if(a==="win32")i=`powershell -Command "Add-Type -AssemblyName System.IO.Compression.FileSystem; [System.IO.Compression.ZipFile]::OpenRead('${n.replace(/\\/g,"\\\\")}').Entries | Select-Object -ExpandProperty FullName"`;else if(a==="darwin")i=`unzip -l "${n}" | grep -E '^[[:space:]]*[0-9]+' | awk '{print $NF}'`;else throw new Error(`Unsupported platform: ${a}`);const{stdout:s}=await r(i);return a==="win32"?s.trim().split(`
`).filter(o=>o.trim()):s.trim().split(`
`).filter(o=>o.trim())}catch(e){return console.error("Failed to list zip contents:",e),[]}}async function x(n,e,t=null,r={}){const a=require("fs"),i=require("path");try{const s=await window.eagle.os.tmpdir(),o=i.join(s,`${n}.${e}`),c=await window.eagle.folder.getSelected();if(c&&c.length>0){const l=c[0];r.folders=[l.id]}return await a.promises.writeFile(o,t||""),r.name=`${n}.${e}`,await window.eagle.item.addFromPath(o,r),!0}catch(s){return console.error("Failed to create file in Eagle:",s),!1}}function v(n,e=2){if(n===0)return"0 Bytes";const t=1024,r=e<0?0:e,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(n)/Math.log(t));return parseFloat((n/Math.pow(t,i)).toFixed(r))+" "+a[i]}const _=Object.freeze(Object.defineProperty({__proto__:null,createFile:x,extractZip:E,formatBytes:v,listZipContents:w},Symbol.toStringTag,{value:"Module"}));function $(n,e,t){const r=document.createElement(n);return e&&(r.className=e),t&&(r.textContent=t),r}function B(n,e){const t=document.createElement("style");e&&(t.id=e),t.textContent=n,document.head.appendChild(t)}function T(n){const e=document.getElementById(n);e&&e.remove()}function k(n,e=5e3){return new Promise((t,r)=>{const a=document.querySelector(n);if(a){t(a);return}const i=new MutationObserver(()=>{const s=document.querySelector(n);s&&(i.disconnect(),t(s))});i.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{i.disconnect(),r(new Error(`Element ${n} not found within ${e}ms`))},e)})}function S(n){const e=document.createElement("script");e.textContent=n,document.head.appendChild(e),e.remove()}function P(n){if(navigator.clipboard)return navigator.clipboard.writeText(n);{const e=document.createElement("textarea");return e.value=n,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),Promise.resolve()}}function F(n){const e=document.createElement("div");return e.textContent=n,e.innerHTML}const D=Object.freeze(Object.defineProperty({__proto__:null,addStylesheet:B,copyToClipboard:P,createElement:$,injectScript:S,removeStylesheet:T,sanitizeHtml:F,waitForElement:k},Symbol.toStringTag,{value:"Module"}));function M(n,e){let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>n(...r),e)}}function L(n,e){let t;return(...r)=>{t||(n(...r),t=!0,setTimeout(()=>t=!1,e))}}function A(n="plugin"){return`${n}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function N(n){try{return new URL(n),!0}catch{return!1}}const O=Object.freeze(Object.defineProperty({__proto__:null,debounce:M,generateId:A,isValidUrl:N,throttle:L},Symbol.toStringTag,{value:"Module"}));async function p(n,e){try{return(await e.folder.getAll()).find(a=>a.name===n)||null}catch(t){return console.error("Error searching for folder:",t),null}}async function I(n,e,t){const r=n.name||n.title||n.id||"Unknown Folder",a=[];let i=0;console.log(`Swapping folder "${r}" to tag for ${e.length} items`);for(const s of e)try{const o=await t.item.getById(s.id),c=o.tags||[];c.includes(r)||(o.tags=[...c,r],console.log(`Adding tag "${r}" to item ${s.id}`));const l=o.folders||[];l.includes(n.id)&&(o.folders=l.filter(u=>u!==n.id),console.log(`Removing item ${s.id} from folder "${r}"`)),await o.save(),i++}catch(o){const c=`Error processing item ${s.id}: ${o}`;console.error(c),a.push(c)}return{success:a.length===0,processedCount:i,errors:a}}async function z(n,e,t){const r=[];let a=0;console.log(`Swapping tag "${n}" to folder for ${e.length} items`);let i=await p(n,t);if(!i)try{console.log(`Creating new folder: "${n}"`),i=await t.folder.create({name:n}),console.log("Created new folder:",i)}catch(s){const o=`Failed to create folder "${n}": ${s}`;return console.error(o),{success:!1,processedCount:0,errors:[o],folder:null}}for(const s of e)try{const o=await t.item.getById(s.id),c=o.tags||[];c.includes(n)&&(o.tags=c.filter(u=>u!==n),console.log(`Removing tag "${n}" from item ${s.id}`));const l=o.folders||[];l.includes(i.id)||(o.folders=[...l,i.id],console.log(`Adding item ${s.id} to folder "${n}"`)),await o.save(),a++}catch(o){const c=`Error processing item ${s.id}: ${o}`;console.error(c),r.push(c)}return{success:r.length===0,processedCount:a,errors:r,folder:i}}const j=Object.freeze(Object.defineProperty({__proto__:null,getFolderByName:p,swapFolderToTag:I,swapTagToFolder:z},Symbol.toStringTag,{value:"Module"}));async function R(n,e,t,r){const a=await m(()=>import("./index-XOtGWQql.js").then(u=>u.w),__vite__mapDeps([0,1]),import.meta.url),i=await m(()=>Promise.resolve().then(()=>_),void 0,import.meta.url),s=await m(()=>import("./index-XOtGWQql.js").then(u=>u.p),__vite__mapDeps([0,1]),import.meta.url),o=await m(()=>Promise.resolve().then(()=>D),void 0,import.meta.url),c=await m(()=>Promise.resolve().then(()=>O),void 0,import.meta.url),l=await m(()=>Promise.resolve().then(()=>j),void 0,import.meta.url);return{storage:n,container:e,pluginId:t,manifest:r,visual:{Button:y,CardManager:b,Dialog:C},utils:{files:{createFile:i.createFile,extractZip:i.extractZip,listZipContents:i.listZipContents,formatBytes:i.formatBytes},paths:{getUserHomeDirectory:s.getUserHomeDirectory,getExtensionsPath:s.getExtensionsPath,getDownloadPath:s.getDownloadPath,getPowerEagleBasePath:s.getPowerEagleBasePath,ensurePowerEagleDirectories:s.ensurePowerEagleDirectories},dom:{createElement:o.createElement,addStylesheet:o.addStylesheet,removeStylesheet:o.removeStylesheet,waitForElement:o.waitForElement,injectScript:o.injectScript,copyToClipboard:o.copyToClipboard,sanitizeHtml:o.sanitizeHtml},common:{debounce:c.debounce,throttle:c.throttle,generateId:c.generateId,isValidUrl:c.isValidUrl},op:{getFolderByName:l.getFolderByName,swapFolderToTag:l.swapFolderToTag,swapTagToFolder:l.swapTagToFolder}},webapi:a.default,listeners:g}}export{Z as BUILT_IN_PLUGINS,G as BaseManager,y as Button,b as CardManager,C as Dialog,B as addStylesheet,P as copyToClipboard,K as createDebugLogger,$ as createElement,x as createFile,R as createPowerSDKContext,M as debounce,W as ensurePowerEagleDirectories,E as extractZip,v as formatBytes,A as generateId,Y as getDownloadPath,J as getExtensionsPath,p as getFolderByName,Q as getPowerEagleBasePath,X as getUserHomeDirectory,S as injectScript,N as isValidUrl,w as listZipContents,T as removeStylesheet,g as rootListeners,F as sanitizeHtml,I as swapFolderToTag,z as swapTagToFolder,L as throttle,k as waitForElement,ee as webapi};
